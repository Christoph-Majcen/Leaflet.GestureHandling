L.GestureHandler=L.Handler.extend({addHooks:function(){this._disableInteractions(),this._checkIfMacAddClass(),L.DomEvent.on(this._map._container,"click",this._handleTouch,this),L.DomEvent.on(this._map._container,"touchstart",this._handleTouch,this),L.DomEvent.on(this._map._container,"touchend",this._handleTouch,this),L.DomEvent.on(this._map._container,"touchmove",this._handleTouch,this),L.DomEvent.on(this._map._container,"mousewheel",this._handleScroll,this)},removeHooks:function(){this._enableInteractions(),this._removeMacClass(),L.DomEvent.off(this._map._container,"click",this._handleTouch,this),L.DomEvent.off(this._map._container,"touchstart",this._handleTouch,this),L.DomEvent.off(this._map._container,"touchend",this._handleTouch,this),L.DomEvent.off(this._map._container,"touchmove",this._handleTouch,this),L.DomEvent.off(this._map._container,"mousewheel",this._handleScroll,this)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_checkIfMacAddClass:function(){0<=navigator.platform.toUpperCase().indexOf("MAC")&&this._map._container.classList.add("mac")},_removeMacClass:function(){this._map._container.classList.remove("mac")},_handleTouch:function(t){t.target.classList.contains("leaflet-control-minimap")||t.target.classList.contains("leaflet-interactive")||("pointerdown"!==t.type&&"pointerup"!==t.type?"touchmove"===t.type&&1===t.touches.length?(this._map._container.classList.add("leaflet-gesture-handling-touch-warning"),this._map.dragging.disable()):(this._map._container.classList.remove("leaflet-gesture-handling-touch-warning"),this._map.dragging.enable()):this._map.dragging.enable())},_isScrolling:!1,_handleScroll:function(t){t.metaKey||t.ctrlKey?(this._map._container.classList.remove("leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(this._map._container.classList.add("leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var t=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),e=0;e<t.length;e++)t[e].classList.remove("leaflet-gesture-handling-scroll-warning")},1e3))}}),L.Map.addInitHook("addHandler","gestureHandling",L.GestureHandler);