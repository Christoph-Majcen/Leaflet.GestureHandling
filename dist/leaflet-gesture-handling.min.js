L.GestureHander_LanguageContent={en:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},fr:{touch:"Utilisez deux doigts pour déplacer la carte",scroll:"Vous pouvez zoomer sur la carte à l'aide de Ctrl+Molette de défilement",scrollMac:"Vous pouvez zoomer sur la carte à l'aide de ⌘+Molette de défilement"}},L.GestureHandler=L.Handler.extend({addHooks:function(){this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),L.DomEvent.on(this._map._container,"click",this._handleTouch,this),L.DomEvent.on(this._map._container,"mousewheel",this._handleScroll,this)},removeHooks:function(){this._enableInteractions(),this._removeMacClass(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),L.DomEvent.off(this._map._container,"click",this._handleTouch,this),L.DomEvent.off(this._map._container,"mousewheel",this._handleScroll,this)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setLanguageContent:function(){var e,t=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(t=!0);var a=this._getUserLanguage();a||(a="en"),L.GestureHander_LanguageContent[a]&&(e=L.GestureHander_LanguageContent[a]),e||-1===a.indexOf("-")||(a=a.split("-")[0],e=L.GestureHander_LanguageContent[a]),e||(console.log("NO lang found for",a),a="en",e=L.GestureHander_LanguageContent[a]);var n=e.scroll;t&&(n=e.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",e.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",n)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_removeMacClass:function(){this._map._container.classList.remove("mac")},_handleTouch:function(e){e.target.classList.contains("leaflet-control-minimap")||e.target.classList.contains("leaflet-interactive")||("touchmove"!==e.type&&"touchstart"!==e.type||1!==e.touches.length?(e.currentTarget.classList.remove("leaflet-gesture-handling-touch-warning"),this._map.dragging.enable()):(e.currentTarget.classList.add("leaflet-gesture-handling-touch-warning"),this._map.dragging.disable()))},_isScrolling:!1,_handleScroll:function(e){e.metaKey||e.ctrlKey?(this._map._container.classList.remove("leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(this._map._container.classList.add("leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var e=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),t=0;t<e.length;t++)e[t].classList.remove("leaflet-gesture-handling-scroll-warning")},1e3))}}),L.Map.addInitHook("addHandler","gestureHandling",L.GestureHandler);